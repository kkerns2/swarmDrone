<launch>

    <group ns="drone1">
        <!--
            1.Start SLAM for each drone
            2.Start explorer for each drone
            3.Start MoveBase for each drone
            4.Merge the maps
            5.Save the map via rosrun map_server map_saver -f ~/map
        -->
        <include file="$(find spawn_mulitple_drones)/launch/start_slam.launch">
            <arg name="tf_prefix" value="drone1"/>
        </include>

        <include file="$(find explorer)/launch/explorer.launch">
            <arg name="tf_prefix" value="drone1"/>
        </include>

        <include file="$(find explorer)/launch/move_base.launch">
            <arg name="tf_prefix" value="drone1"/>
        </include>

    </group>

    <group ns="drone2">
        <!--
            1.Start SLAM for each drone
            2.Start explorer for each drone
            3.Start MoveBase for each drone
            4.Merge the maps
            5.Save the map via rosrun map_server map_saver -f ~/map
        -->
        <include file="$(find spawn_mulitple_drones)/launch/start_slam.launch">
            <arg name="tf_prefix" value="drone2"/>
        </include>

        <include file="$(find explorer)/launch/explorer.launch">
            <arg name="tf_prefix" value="drone2"/>
        </include>

        <include file="$(find explorer)/launch/move_base.launch">
            <arg name="tf_prefix" value="drone2"/>
        </include>

    </group>

    <!--Take drones drone maps and pipes them into a master map -->
    <include file="$(find explorer)/launch/multi_map_merge.launch"/>

</launch>